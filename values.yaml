# BD SelfScan values.yaml 

# Global configuration
global:
  namespace: "bd-selfscan-system"

# Scanner configuration
scanner:
  # Use your GitHub Container Registry image 
  image: "ghcr.io/snps-steve/bd-selfscan-scanner:v1.0.0"
  imagePullPolicy: Always
  
  # Resource requirements
  resources:
    requests:
      memory: "2Gi"
      cpu: "500m"
      ephemeralStorage: "20Gi"
    limits:
      memory: "8Gi"
      cpu: "4"
      ephemeralStorage: "50Gi"
  
  # Job configuration
  job:
    backoffLimit: 3
    activeDeadlineSeconds: 5400  # 1.5 hours
    ttlSecondsAfterFinished: 86400  # 24 hours
    parallelism: 1
    completions: 1
    
    # Security context
    securityContext:
      runAsNonRoot: true
      runAsUser: 1000
      runAsGroup: 1000
      fsGroup: 1000
      
  # Container security context
  containerSecurityContext:
    allowPrivilegeEscalation: false
    readOnlyRootFilesystem: false
    capabilities:
      drop:
        - ALL

# Black Duck secrets configuration 
blackduck:
  tokenSecretName: "blackduck-creds"
  trustCert: true

# Scanning configuration 
scanning:
  imageDownloadTimeout: 900
  imageDownloadRetries: 5
  scanTimeout: 3600
  projectTier: 3
  policyFailSeverities: "CRITICAL,BLOCKER"

# ConfigMap settings 
configMap:
  applications:
    name: "bd-selfscan-applications"
  scripts:
    name: "bd-selfscan-scanner-scripts"

# RBAC 
rbac:
  create: true
  clusterRole: true

# Service Account 
serviceAccount:
  create: true
  name: "bd-selfscan"

# Registry configuration
registry:
  imagePullSecrets: []

# Phase configuration
onDemand:
  enabled: true

automated:
  enabled: false  # Phase 1 only

# Monitoring settings
monitoring:
  enabled: false
  serviceMonitor:
    enabled: false
    interval: "30s"
    scrapeTimeout: "10s"
    labels: {}

# Debug configuration
debug:
  enabled: false
  logLevel: "INFO"
  keepTempFiles: false